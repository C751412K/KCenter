(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1026:function(e,t,a){e.exports={"next-sr-only":"AddComponents--next-sr-only--1ssETKR",HierarchicalForm:"AddComponents--HierarchicalForm--3p3P6Wq",HierarchicalBlock:"AddComponents--HierarchicalBlock--3M9ZReq",Card:"AddComponents--Card--3XBZ2-h",Button:"AddComponents--Button--3NP9AA2",simpleFormDialog:"AddComponents--simpleFormDialog--1UbDDeW",AddButton:"AddComponents--AddButton--fVNtlQY",AddDialog:"AddComponents--AddDialog--2oqNAHE",loading:"AddComponents--loading--2ECAefw"}},1027:function(e,t,a){(function(e){ace.define("ace/theme/tomorrow_night_eighties",["require","exports","module","ace/lib/dom"],(function(e,t,a){var r;t.isDark=!0,t.cssClass="ace-tomorrow-night-eighties",t.cssText=".ace-tomorrow-night-eighties .ace_gutter {background: #272727;color: #CCC}.ace-tomorrow-night-eighties .ace_print-margin {width: 1px;background: #272727}.ace-tomorrow-night-eighties {background-color: #2D2D2D;color: #CCCCCC}.ace-tomorrow-night-eighties .ace_constant.ace_other,.ace-tomorrow-night-eighties .ace_cursor {color: #CCCCCC}.ace-tomorrow-night-eighties .ace_marker-layer .ace_selection {background: #515151}.ace-tomorrow-night-eighties.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #2D2D2D;}.ace-tomorrow-night-eighties .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-tomorrow-night-eighties .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #6A6A6A}.ace-tomorrow-night-bright .ace_stack {background: rgb(66, 90, 44)}.ace-tomorrow-night-eighties .ace_marker-layer .ace_active-line {background: #393939}.ace-tomorrow-night-eighties .ace_gutter-active-line {background-color: #393939}.ace-tomorrow-night-eighties .ace_marker-layer .ace_selected-word {border: 1px solid #515151}.ace-tomorrow-night-eighties .ace_invisible {color: #6A6A6A}.ace-tomorrow-night-eighties .ace_keyword,.ace-tomorrow-night-eighties .ace_meta,.ace-tomorrow-night-eighties .ace_storage,.ace-tomorrow-night-eighties .ace_storage.ace_type,.ace-tomorrow-night-eighties .ace_support.ace_type {color: #CC99CC}.ace-tomorrow-night-eighties .ace_keyword.ace_operator {color: #66CCCC}.ace-tomorrow-night-eighties .ace_constant.ace_character,.ace-tomorrow-night-eighties .ace_constant.ace_language,.ace-tomorrow-night-eighties .ace_constant.ace_numeric,.ace-tomorrow-night-eighties .ace_keyword.ace_other.ace_unit,.ace-tomorrow-night-eighties .ace_support.ace_constant,.ace-tomorrow-night-eighties .ace_variable.ace_parameter {color: #F99157}.ace-tomorrow-night-eighties .ace_invalid {color: #CDCDCD;background-color: #F2777A}.ace-tomorrow-night-eighties .ace_invalid.ace_deprecated {color: #CDCDCD;background-color: #CC99CC}.ace-tomorrow-night-eighties .ace_fold {background-color: #6699CC;border-color: #CCCCCC}.ace-tomorrow-night-eighties .ace_entity.ace_name.ace_function,.ace-tomorrow-night-eighties .ace_support.ace_function,.ace-tomorrow-night-eighties .ace_variable {color: #6699CC}.ace-tomorrow-night-eighties .ace_support.ace_class,.ace-tomorrow-night-eighties .ace_support.ace_type {color: #FFCC66}.ace-tomorrow-night-eighties .ace_heading,.ace-tomorrow-night-eighties .ace_markup.ace_heading,.ace-tomorrow-night-eighties .ace_string {color: #99CC99}.ace-tomorrow-night-eighties .ace_comment {color: #999999}.ace-tomorrow-night-eighties .ace_entity.ace_name.ace_tag,.ace-tomorrow-night-eighties .ace_entity.ace_other.ace_attribute-name,.ace-tomorrow-night-eighties .ace_meta.ace_tag,.ace-tomorrow-night-eighties .ace_variable {color: #F2777A}.ace-tomorrow-night-eighties .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ09NrYAgMjP4PAAtGAwchHMyAAAAAAElFTkSuQmCC) right repeat-y}",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/tomorrow_night_eighties"],(function(t){e&&(e.exports=t)}))}).call(this,a(163)(e))},1031:function(e,t,a){"use strict";a.r(t);var r=a(995),n=a(996),o=a(1),i=a.n(o),l=a(56),c=a.n(l),s=a(109),u=a(1029),d=a(74),m=a(20),h=a(67),f=a(39),p=a(162),g=a(23),y=a(54),b=a(22),v=a(66),E=a(16),k=a(128),S=a(47),w=a(99),C=a(33),D=a(36),x=a(11),_=a(143),T=a(30),I=a(218),A=a.n(I),O=a(187),L=a(21),R=a(435),q=a(164),N=a(311),P=a(139),V=a(142),j=a(53),F=a(237),B=a(82),H=a(314),M=a(157),Q=a(315),K=a.n(Q),z=a(1026),W=a.n(z),U=a(1027),J=a(436);function Y(e,t,a,r,n,o,i){try{var l=e[o](i),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(r,n)}function $(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){Y(o,r,n,i,l,"next",e)}function l(e){Y(o,r,n,i,l,"throw",e)}i(void 0)}))}}function G(e){return ee(e)||X(e)||re(e)||Z()}function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function X(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ee(e){if(Array.isArray(e))return ne(e)}function te(e,t){return ie(e)||oe(e,t)||re(e,t)||ae()}function ae(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function re(e,t){if(e){if("string"==typeof e)return ne(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function oe(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r=[],n=!0,o=!1,i,l;try{for(a=a.call(e);!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw l}}return r}}function ie(e){if(Array.isArray(e))return e}var le=C.a.Row,ce=C.a.Col;function se(e){var t,a=te(Object(o.useState)({script:""}),2),r=a[0],n=a[1],l,c=te(Object(o.useState)([]),2),s=c[0],u=c[1];function d(t){if(t){var a=Object.assign(e.teamData,{});a.push({value:t.id,label:t.name}),u(a)}else u(e.teamData)}Object(o.useEffect)((function(){var t=JSON.parse(JSON.stringify(e.value));if(Object.keys(t).length>0){var a=Object.assign(t,{}),r=a.team;r?(a.teamId=r.id,a.teamName=r.name):delete a.teamId,a.script||(a.script=""),e.teamData.length<=0?d(r):u(e.teamData),n(a)}else{var o;n({script:""}),u(e.teamData)}}),[e]);var h=M.a.useField({values:r});function f(){e.visableChange(!e.visable)}var p={getCompletions:function e(t,a,r,n,o){var i;o(null,[].concat(G(["create","create stream","create stream as select","create table","create table as select","drop stream","drop table","as","select","left","full","inner","join","window","windowstart","where","rowkey","group","by","having","and","emit","changes","type","stream","with","drop","table","show","types","insert","into","values","describe","extended","function","explain","if","exists","delete","topic","print","from","beginning","interval","limit","rowtime","set","cast","kafka_topic","case","when","then","else","end","like","between","list","functions","topics","streams","tables","queries","properties","spool","terminate","struct","abs","arraycontains","as_array","as_map","ceil","concat","unix_date","unix_timestamp","datetostring","elt","entries","extractjsonfield","exp","field","floor","generate_series","generate_series","geo_distance","ifnull","initcap","lcase","len","ln","mask","mask_keep_left","mask_keep_right","mask_left","mask_right","random","replace","round","sign","sqrt","slice","split","stringtodate","stringtotimestamp","substring","timestamptostring","trim","ucase","url_decode_param","url_encode_param","url_extract_fragment","url_extract_host","url_extract_parameter","url_extract_path","url_extract_port","url_extract_protocol","url_extract_query","collect_list","collect_set","count","histogram","average","max","min","sum","topk","topkdistinct","windowstart","windowend","explode","value_format","partition","partitions","replicas","value_delimiter","key","timestamp","timestamp_format","wrap_single_value","window_type","window_size","kafka_ceter is best."].map((function(e){return{caption:e,value:e,meta:"static"}}))),G(a.$mode.$highlightRules.$keywordList.map((function(e){return{caption:e,value:e,meta:"keyword"}})))))}},g=function(){var t=$(regeneratorRuntime.mark((function t(){var a,n,o,i;return regeneratorRuntime.wrap((function t(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,h.validatePromise();case 2:if(a=l.sent,!(n=a.errors)){l.next=6;break}return l.abrupt("return");case 6:o={},i=h.getValues(),"Stream"===e.moudlue?(o.kStreamInfo=i,o.kStreamInfo.id=r.id):(o.kTableInfo=i,o.kTableInfo.id=r.id),e.saveData(o);case 10:case"end":return l.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}(),y=function e(t){r.script=t,n(r)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(S.a,{visible:e.visable,onClose:f,onCancel:f,className:W.a.simpleFormDialog,onOk:g,isFullScreen:!0},i.a.createElement("div",null,i.a.createElement("h4",null,e.name," ",e.moudlue)),i.a.createElement("hr",null),i.a.createElement(q.a,{free:!0,className:W.a.Card},i.a.createElement(q.a.Content,null,i.a.createElement(B.a,{fullWidth:!0,field:h,className:W.a.HierarchicalForm,value:r},i.a.createElement(le,{gutter:"2"},i.a.createElement(ce,null,i.a.createElement(B.a.Item,{label:"".concat(e.moudlue," Name"),required:!0,requiredMessage:"please input the ".concat(e.moudlue," name ")},i.a.createElement(m.a,{name:"name",placeholder:"".concat(e.moudlue," name")}))),i.a.createElement(ce,null,i.a.createElement(B.a.Item,{label:"Team",required:!0,requiredMessage:"please select a team  "},i.a.createElement(j.a,{name:"teamId",placeholder:"please select team",dataSource:s,defaultValue:""})))),i.a.createElement(P.a,{gap:[0,15],columns:1,className:W.a.HierarchicalBlock},i.a.createElement(P.a.Cell,{colSpan:{desktop:3,tablet:1,phone:2}},i.a.createElement(B.a.Item,{label:"Query",required:!0,requiredMessage:"please input the create ".concat(e.moudlue," script ")},i.a.createElement(K.a,{placeholder:"Example: CREATE TABLE OR CREATE STREMA",mode:"sql",height:"500px",width:"100%",theme:"tomorrow_night_eighties",name:"script",value:r.script,onChange:y,fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:[p],enableLiveAutocompletion:!0,showLineNumbers:!1,tabSize:2}})))))))))}var ue=se,de=a(144),me;function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t,a){return t&&pe(e.prototype,t),a&&pe(e,a),e}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}function be(e,t){return(be=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function ve(e){var t=Se();return function a(){var r=we(e),n;if(t){var o=we(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ke(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var De=x.a.createFromIconfontCN(A.a),xe=C.a.Row,_e=C.a.Col,Te=Object(T.withRouter)(me=function(e){ye(a,e);var t=ve(a);function a(){var e;fe(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ce(ke(e=t.call.apply(t,[this].concat(n))),"state",{ksqlServerId:e.props.match.params.ksqlServerId,clusterName:e.props.match.params.clusterName,isLoading:!1,filterDataSource:[],dataSource:[],pageData:[],visible:!1,detailRecord:{},addVisable:!1,describeLoading:!1,mockVisable:!1,teamData:[],mockData:[],mockLoading:!1,mockStream:"",historyLoading:!1,historyData:[],historyVisable:!1,historyFilterDataSource:[],historyPageData:[],formVal:{},moduleName:"Add"}),Ce(ke(e),"renderOper",(function(t,a,r){return i.a.createElement("div",null,i.a.createElement("a",{style:Ie.link,onClick:function t(){return e.handleEdit(r)}},"Edit"),i.a.createElement("span",{style:Ie.separator}),i.a.createElement("a",{style:Ie.link,onClick:function t(){return e.handleDelete(r)}},"Drop"),i.a.createElement("span",{style:Ie.separator}),i.a.createElement("a",{style:Ie.link,onClick:function t(){return e.handleMock(r)}},"Show Data"),i.a.createElement("span",{style:Ie.separator}),i.a.createElement("a",{style:Ie.link,onClick:function t(){return e.handelDetail(r)}},"Describe"),i.a.createElement("span",{style:Ie.separator}),i.a.createElement("a",{style:Ie.link,onClick:function t(){return e.handleHistory(r)}},"History"))})),Ce(ke(e),"renderToConnect",(function(){e.props.history.push("/connector/list")})),Ce(ke(e),"renderTopic",(function(t,a,r){if(t)return i.a.createElement("span",null,t,"    ",i.a.createElement("a",{onClick:e.renderToConnect,style:{fontSize:"11px"}},"Export data"))})),Ce(ke(e),"handleEdit",(function(t){var a=Object.assign(t,{});e.setState({addVisable:!e.state.addVisable,formVal:a,moduleName:"Edit"})})),Ce(ke(e),"handleHistory",(function(t){e.setState({historyLoading:!0,historyVisable:!e.state.historyVisable},(function(){L.a.get("/ksql/history/list?ksqlServerId=".concat(e.state.ksqlServerId,"&name=").concat(t.name,"&type=stream")).then((function(t){var a=[];200===t.data.code&&(a=t.data.data),e.setState({historyLoading:!e.state.historyLoading,historyData:a,historyFilterDataSource:a},(function(){}))})).catch((function(t){console.error(t),e.setState({historyLoading:!1})}))}))})),Ce(ke(e),"handelDetail",(function(t){e.setState({describeLoading:!0,visible:!e.state.visible},(function(){L.a.get("/ksql/describe_stream?ksqlServerId=".concat(e.state.ksqlServerId,"&clusterName=").concat(e.state.clusterName,"&streamName=").concat(t.name)).then((function(t){var a=[];200===t.data.code&&(a=t.data.data),e.setState({describeLoading:!e.state.describeLoading,detailRecord:a},(function(){}))})).catch((function(t){console.error(t),e.setState({describeLoading:!1})}))}))})),Ce(ke(e),"hideDetailDialog",(function(){e.setState({visible:!1})})),Ce(ke(e),"mockDialog",(function(){e.setState({mockVisable:!e.state.mockVisable})})),Ce(ke(e),"handleDelete",(function(t){S.a.confirm({content:"Do you want to Drop  ".concat(t.name,"?"),onOk:function a(){e.handleDeletes(t)},okProps:{children:"OK"},cancelProps:{children:"Cancel"}})})),Ce(ke(e),"mockLoadingChange",(function(){e.setState({mockLoading:!e.state.mockLoading})})),Ce(ke(e),"handleMock",(function(t){var a=e.state.ksqlServerId,r=e.state.clusterName;e.setState({mockVisable:!0,mockLoading:!e.state.mockLoading,mockData:[],mockStream:t.name},(function(){L.a.get("/ksql/select_stream?ksqlServerId=".concat(a,"&clusterName=").concat(r,"&streamName=").concat(t.name)).then((function(t){200==t.data.code&&e.setState({mockData:t.data.data}),e.mockLoadingChange()})).catch((function(t){console.error(t),e.mockLoadingChange()}))}))})),Ce(ke(e),"handleDeletes",(function(t){var a=e.state.ksqlServerId,r=e.state.clusterName;e.setState({isLoading:!0},(function(){L.a.delete("/ksql/drop_stream?ksqlServerId=".concat(a,"&clusterName=").concat(r,"&streamName=").concat(t.name,"&id=").concat(t.id)).then((function(t){200===t.data.code?(e.getStreams(),E.a.success(t.data.message||"drop streams success")):E.a.error(t.data.message||"drop streams has error"),e.setState({isLoading:!1})})).catch((function(e){console.error(e)}))}))})),Ce(ke(e),"redrawPageData",(function(t){e.setState({pageData:t})})),Ce(ke(e),"refreshTableData",(function(t){e.setState({filterDataSource:t})})),Ce(ke(e),"handleFilterChange",(function(t){var a=e.state.dataSource,r=[];0===t.trim().length?r=a:a.forEach((function(e){e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())&&r.push(e)})),e.setState({searchValue:t}),e.refreshTableData(r)})),Ce(ke(e),"getStreams",(function(){e.setState({isLoading:!0},(function(){L.a.get("/ksql/stream/list?clusterId=".concat(e.props.match.params.id)).then((function(t){if(200===t.data.code){var a=t.data.data;e.setState({dataSource:a,filterDataSource:a,isLoading:!1})}else E.a.error(t.data.message),e.setState({isLoading:!1})})).catch((function(t){e.setState({isLoading:!1}),console.error(t)}))}))})),Ce(ke(e),"addVisableChange",(function(){e.setState({addVisable:!e.state.addVisable},(function(){}))})),Ce(ke(e),"getTeam",(function(){L.a.get("/team/userteam").then((function(t){200===t.data.code&&void 0!==t.data.data&&t.data.data.length>0&&e.setState({teamData:t.data.data})})).catch((function(e){console.log(e)}))})),Ce(ke(e),"handelDialog",(function(){e.state.teamData.length>0?e.setState({formVal:{},addVisable:!e.state.addVisable}):S.a.alert({title:"Alert",content:"please join a team"})})),Ce(ke(e),"refreshMockData",(function(t){var a={name:t};e.handleMock(a)})),Ce(ke(e),"addStream",(function(t){var a;t.kStreamInfo.clusterId=e.props.match.params.id,t.clusterName=e.state.clusterName,t.ksqlServerId=e.state.ksqlServerId;var r="/ksql/create_stream";"Edit"==e.state.moduleName&&(r="/ksql/edit_stream"),L.a.post(r,t).then((function(t){200===t.data.code?(E.a.success(t.data.message),e.addVisableChange(),e.getStreams()):E.a.error(t.data.message)})).catch((function(e){console.error(e)}))})),Ce(ke(e),"refreshHistoryTable",(function(t){e.setState({historyPageData:t})})),Ce(ke(e),"renderScript",(function(){})),Ce(ke(e),"mockDataHtml",(function(){var t=e.state.mockData.length>0?Boolean(!1):Boolean(!0);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px",height:"30px"}},i.a.createElement(b.a,{type:"secondary",onClick:function t(a){return e.mockDialog()},disabled:Boolean(t),style:{marginRight:"5px",float:"right"}},i.a.createElement(De,{type:"iconfanhui1"})),i.a.createElement(b.a,{type:"secondary",onClick:function t(a){return e.refreshMockData(e.state.mockStream)},disabled:Boolean(t),style:{marginRight:"5px",float:"right"}},i.a.createElement(De,{type:"iconrefresh"}))),i.a.createElement(f.default,{visible:e.state.mockLoading,style:{width:"100%"}},i.a.createElement(g.a,{dataSource:e.state.mockData},e.state.mockData.length>0?Object.keys(e.state.mockData[0]).map((function(e){return"script"===e?i.a.createElement(g.a.Column,{title:e,dataIndex:e,key:e,cell:renderScript}):i.a.createElement(g.a.Column,{title:e,dataIndex:e,key:e})})):null)))})),Ce(ke(e),"histortBack",(function(){e.setState({historyVisable:!e.state.historyVisable})})),Ce(ke(e),"transTime",(function(e){return Object(O.i)(e)})),Ce(ke(e),"transScript",(function(e){return e||"-"})),Ce(ke(e),"historyHtml",(function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px",height:"30px"}},i.a.createElement(b.a,{type:"secondary",onClick:function t(a){return e.histortBack()},style:{marginRight:"5px",float:"right"}},i.a.createElement(De,{type:"iconfanhui1"}))),i.a.createElement(g.a,{dataSource:e.state.historyPageData},i.a.createElement(g.a.Column,{title:"Time",dataIndex:"date",cell:e.transTime,width:80}),i.a.createElement(g.a.Column,{title:"User",dataIndex:"user",width:80}),i.a.createElement(g.a.Column,{title:"Operate",dataIndex:"operate",width:300}),i.a.createElement(g.a.Column,{title:"Script",dataIndex:"script",cell:e.transScript,width:500})),i.a.createElement(_.a,{dataSource:e.state.historyFilterDataSource,redrawPageData:e.refreshHistoryTable}))})),e}return ge(a,[{key:"componentDidMount",value:function e(){this.getTeam(),this.getStreams()}},{key:"onSort",value:function e(t,a){var r=Object(O.f)(this.state.dataSource,t,a);this.refreshTableData(r)}},{key:"render",value:function e(){var t=this;return this.state.mockVisable?this.mockDataHtml():this.state.historyVisable?this.historyHtml():i.a.createElement("div",null,i.a.createElement(ue,{visable:this.state.addVisable,visableChange:this.addVisableChange,teamData:this.state.teamData,saveData:this.addStream,moudlue:"Stream",value:this.state.formVal,name:this.state.moduleName}),i.a.createElement(xe,{style:Ie.row},i.a.createElement(_e,{align:"center"},i.a.createElement("span",{style:{fontWeight:"600"}},"Stream Name:\xa0\xa0\xa0"),i.a.createElement(m.a,{placeholder:"StreamName",hasClear:!0,onChange:this.handleFilterChange,style:{width:"200px"},value:this.state.searchValue})),i.a.createElement(_e,{align:"center"},i.a.createElement(b.a,{type:"secondary",onClick:this.handelDialog},i.a.createElement(x.a,{type:"add"}),"Add Stream"))),i.a.createElement(S.a,{className:"simple-form-dialog",style:Ie.simpleFormDialog,autoFocus:!1,footerAlign:"center",footer:i.a.createElement(b.a,{type:"primary",onClick:this.hideDetailDialog},"Cancel"),onClose:this.hideDetailDialog,cancelProps:{children:"Cancel"},isFullScreen:!0,visible:this.state.visible},i.a.createElement(i.a.Fragment,null,i.a.createElement(f.default,{visible:this.state.describeLoading,style:{width:"100%"}},i.a.createElement("div",null,i.a.createElement(c.a,{title:"Describe Stream "},i.a.createElement("ul",null,i.a.createElement("li",{style:Ie.detailItem},i.a.createElement("div",{style:Ie.detailTitle},"Stream:"),i.a.createElement("div",null,this.state.detailRecord.name)),i.a.createElement("li",{style:Ie.detailItem},i.a.createElement("div",{style:Ie.detailTitle},"TopicName:"),i.a.createElement("div",null,this.state.detailRecord.topic)),i.a.createElement("li",{style:Ie.detailItem},i.a.createElement("div",{style:Ie.detailTitle},"Key Format:"),i.a.createElement("div",null,this.state.detailRecord.keyFormat)),i.a.createElement("li",{style:Ie.detailItem},i.a.createElement("div",{style:Ie.detailTitle},"Value Format:"),i.a.createElement("div",null,this.state.detailRecord.valueFormat)),i.a.createElement("li",{style:Ie.detailItem},i.a.createElement("div",{style:Ie.detailTitle},"Partitions:"),i.a.createElement("div",null,this.state.detailRecord.partitions)),i.a.createElement("li",{style:Ie.detailItem},i.a.createElement("div",{style:Ie.detailTitle},"Replication:"),i.a.createElement("div",null,this.state.detailRecord.replication)),i.a.createElement("li",{style:Ie.detailItem},i.a.createElement("div",{style:Ie.detailTitle},"Schema:")),i.a.createElement("li",null,i.a.createElement(g.a,{size:"small",dataSource:this.state.detailRecord.fields},i.a.createElement(g.a.Column,{title:"Name",dataIndex:"name"}),i.a.createElement(g.a.Column,{title:"Type",dataIndex:"schema.type"}))))))))),i.a.createElement(g.a,{loading:this.state.isLoading,dataSource:this.state.pageData,hasBorder:!1,onSort:function e(a,r){return t.onSort(a,r)}},i.a.createElement(g.a.Column,{title:"Stream",dataIndex:"name",cell:this.renderTopic,sortable:!0}),i.a.createElement(g.a.Column,{title:"Topic Name",dataIndex:"topic"}),i.a.createElement(g.a.Column,{title:"Owner",dataIndex:"owner.name"}),i.a.createElement(g.a.Column,{title:"Team",dataIndex:"team.name"}),i.a.createElement(g.a.Column,{title:"Operation",cell:this.renderOper})),i.a.createElement(_.a,{dataSource:this.state.filterDataSource,redrawPageData:this.redrawPageData}))}}]),a}(o.Component))||me,Ie={link:{margin:"0 5px",color:"rgba(49, 128, 253, 0.65)",cursor:"pointer",textDecoration:"none"},loading:{width:"100%"},separator:{margin:"0 8px",display:"inline-block",height:"12px",width:"1px",verticalAlign:"middle",background:"#e8e8e8"},row:{margin:"20px 4px 20px"},operBtn:{display:"inline-block",width:"24px",height:"24px",borderRadius:"999px",color:"#929292",background:"#f2f2f2",textAlign:"center",cursor:"pointer",lineHeight:"24px",marginRight:"6px"},detailItem:{padding:"15px 0px",display:"flex",borderTop:"1px solid #EEEFF3"},detailTitle:{marginRight:"30px",textAlign:"left",width:"100px",color:"#999999"},simpleFormDialog:{width:"640px"},simpleFormDialogs:{width:"1300px"}},Ae=Te,Oe;function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t,a){return t&&qe(e.prototype,t),a&&qe(e,a),e}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function je(e){var t=He();return function a(){var r=Me(e),n;if(t){var o=Me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(e,t){if(t&&("object"===Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Be(e)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Qe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ke=x.a.createFromIconfontCN(A.a),ze=C.a.Row,We=C.a.Col,Ue=Object(T.withRouter)(Oe=function(e){Pe(a,e);var t=je(a);function a(){var e;Re(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Qe(Be(e=t.call.apply(t,[this].concat(n))),"state",{ksqlServerId:e.props.match.params.ksqlServerId,clusterName:e.props.match.params.clusterName,isLoading:!1,filterDataSource:[],dataSource:[],pageData:[],visible:!1,detailRecord:{},teamData:[],addVisable:!1,describeLoading:!1,mockVisable:!1,mockLoading:!1,mockData:[],historyLoading:!1,historyData:[],historyVisable:!1,historyFilterDataSource:[],historyPageData:[],formVal:{},moduleName:"Add"}),Qe(Be(e),"renderOper",(function(t,a,r){return i.a.createElement("div",null,i.a.createElement("a",{style:Je.link,onClick:function t(){return e.handleEdit(r)}},"Edit"),i.a.createElement("span",{style:Je.separator}),i.a.createElement("a",{style:Je.link,onClick:function t(){return e.handleDelete(r)}},"Drop"),i.a.createElement("span",{style:Je.separator}),i.a.createElement("a",{style:Je.link,onClick:function t(){return e.handleMock(r)}},"Show Data"),i.a.createElement("span",{style:Je.separator}),i.a.createElement("a",{style:Je.link,onClick:function t(){return e.handelDetail(r)}},"Describe"),i.a.createElement("span",{style:Je.separator}),i.a.createElement("a",{style:Je.link,onClick:function t(){return e.handleHistory(r)}},"History"))})),Qe(Be(e),"handleEdit",(function(t){var a=Object.assign(t,{});e.setState({addVisable:!e.state.addVisable,formVal:a,moduleName:"Edit"})})),Qe(Be(e),"handleHistory",(function(t){e.setState({historyLoading:!0,historyVisable:!e.state.historyVisable},(function(){L.a.get("/ksql/history/list?ksqlServerId=".concat(e.state.ksqlServerId,"&name=").concat(t.name,"&type=table")).then((function(t){var a=[];200===t.data.code&&(a=t.data.data),e.setState({historyLoading:!e.state.historyLoading,historyData:a,historyFilterDataSource:a},(function(){}))})).catch((function(t){console.error(t),e.setState({historyLoading:!1})}))}))})),Qe(Be(e),"handleMock",(function(t){var a=e.state.ksqlServerId,r=e.state.clusterName;e.setState({mockVisable:!0,mockLoading:!e.state.mockLoading,mockData:[],mockStream:t.name},(function(){L.a.get("/ksql/select_stream?ksqlServerId=".concat(a,"&clusterName=").concat(r,"&streamName=").concat(t.name)).then((function(t){200==t.data.code&&e.setState({mockData:t.data.data}),e.mockLoadingChange()})).catch((function(t){console.error(t),e.mockLoadingChange()}))}))})),Qe(Be(e),"handelDetail",(function(t){e.setState({describeLoading:!0,visible:!e.state.visible},(function(){L.a.get("/ksql/describe_table?ksqlServerId=".concat(e.state.ksqlServerId,"&clusterName=").concat(e.state.clusterName,"&tableName=").concat(t.name)).then((function(t){var a=[];200===t.data.code&&(a=t.data.data),e.setState({describeLoading:!e.state.describeLoading,detailRecord:a},(function(){}))})).catch((function(t){console.error(t),e.setState({describeLoading:!1})}))}))})),Qe(Be(e),"hideDetailDialog",(function(){e.setState({visible:!1})})),Qe(Be(e),"handleDelete",(function(t){S.a.confirm({content:"Do you want to Drop  ".concat(t.name,"?"),onOk:function a(){e.handleDeletes(t)},okProps:{children:"OK"},cancelProps:{children:"Cancel"}})})),Qe(Be(e),"handleDeletes",(function(t){var a=e.state.ksqlServerId,r=e.state.clusterName;e.setState({isLoading:!0},(function(){L.a.delete("/ksql/drop_table?ksqlServerId=".concat(a,"&clusterName=").concat(r,"&tableName=").concat(t.name,"&id=").concat(t.id)).then((function(t){200===t.data.code?(e.getTables(a,r),E.a.success(t.data.message||"drop table success")):E.a.error(t.data.message||"drop table has error"),e.setState({isLoading:!1})})).catch((function(e){console.error(e)}))}))})),Qe(Be(e),"redrawPageData",(function(t){e.setState({pageData:t})})),Qe(Be(e),"refreshTableData",(function(t){e.setState({filterDataSource:t})})),Qe(Be(e),"handleFilterChange",(function(t){var a=e.state.dataSource,r=[];0===t.trim().length?r=a:a.forEach((function(e){e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())&&r.push(e)})),e.setState({searchValue:t}),e.refreshTableData(r)})),Qe(Be(e),"getTables",(function(t,a){e.setState({isLoading:!0},(function(){L.a.get("/ksql/table/list?clusterId=".concat(e.props.match.params.id)).then((function(t){if(200===t.data.code){var a=t.data.data;e.setState({dataSource:a,filterDataSource:a,isLoading:!1})}else E.a.error(t.data.message),e.setState({isLoading:!1})})).catch((function(t){e.setState({isLoading:!1}),console.error(t)}))}))})),Qe(Be(e),"getTeam",(function(){L.a.get("/team/userteam").then((function(t){200===t.data.code&&void 0!==t.data.data&&t.data.data.length>0&&e.setState({teamData:t.data.data})})).catch((function(e){console.log(e)}))})),Qe(Be(e),"handelDialog",(function(){e.state.teamData.length>0?e.setState({formVal:{},addVisable:!e.state.addVisable}):S.a.alert({title:"Alert",content:"please join a team"})})),Qe(Be(e),"addTable",(function(t){var a;t.kTableInfo.clusterId=e.props.match.params.id,t.clusterName=e.state.clusterName,t.ksqlServerId=e.state.ksqlServerId;var r="/ksql/create_table";"Edit"==e.state.moduleName&&(r="/ksql/edit_table"),L.a.post(r,t).then((function(t){200===t.data.code?(E.a.success(t.data.message),e.addVisableChange(),e.getTables()):E.a.error(t.data.message)})).catch((function(e){console.error(e)}))})),Qe(Be(e),"addVisableChange",(function(){e.setState({addVisable:!e.state.addVisable})})),Qe(Be(e),"mockDialog",(function(){e.setState({mockVisable:!e.state.mockVisable})})),Qe(Be(e),"refreshMockData",(function(t){var a={name:t};e.handleMock(a)})),Qe(Be(e),"mockLoadingChange",(function(){e.setState({mockLoading:!e.state.mockLoading})})),Qe(Be(e),"refreshHistoryTable",(function(t){e.setState({historyPageData:t})})),Qe(Be(e),"mockDataHtml",(function(){var t=e.state.mockData.length>0?Boolean(!1):Boolean(!0);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px",height:"30px"}},i.a.createElement(b.a,{type:"secondary",onClick:function t(a){return e.mockDialog()},disabled:Boolean(t),style:{marginRight:"5px",float:"right"}},i.a.createElement(Ke,{type:"iconfanhui1"})),i.a.createElement(b.a,{type:"secondary",onClick:function t(a){return e.refreshMockData(e.state.mockStream)},disabled:Boolean(t),style:{marginRight:"5px",float:"right"}},i.a.createElement(Ke,{type:"iconrefresh"}))),i.a.createElement(f.default,{visible:e.state.mockLoading,style:{width:"100%"}},i.a.createElement(g.a,{dataSource:e.state.mockData},e.state.mockData.length>0?Object.keys(e.state.mockData[0]).map((function(e){return i.a.createElement(g.a.Column,{title:e,dataIndex:e,key:e})})):null)))})),Qe(Be(e),"histortBack",(function(){e.setState({historyVisable:!e.state.historyVisable})})),Qe(Be(e),"transTime",(function(e){return Object(O.i)(e)})),Qe(Be(e),"transScript",(function(e){return e||"-"})),Qe(Be(e),"historyHtml",(function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px",height:"30px"}},i.a.createElement(b.a,{type:"secondary",onClick:function t(a){return e.histortBack()},style:{marginRight:"5px",float:"right"}},i.a.createElement(Ke,{type:"iconfanhui1"}))),i.a.createElement(g.a,{dataSource:e.state.historyPageData},i.a.createElement(g.a.Column,{title:"Time",dataIndex:"date",cell:e.transTime}),i.a.createElement(g.a.Column,{title:"User",dataIndex:"user"}),i.a.createElement(g.a.Column,{title:"Operate",dataIndex:"operate"}),i.a.createElement(g.a.Column,{title:"Script",dataIndex:"script",cell:e.transScript,width:500})),i.a.createElement(_.a,{dataSource:e.state.historyFilterDataSource,redrawPageData:e.refreshHistoryTable}))})),Qe(Be(e),"renderToConnect",(function(){e.props.history.push("/connector/list")})),Qe(Be(e),"renderTopic",(function(t,a,r){if(t)return i.a.createElement("span",null,t,"    ",i.a.createElement("a",{onClick:e.renderToConnect,style:{fontSize:"11px"}},"Export data"))})),e}return Ne(a,[{key:"componentDidMount",value:function e(){this.getTeam(),this.getTables(this.state.ksqlServerId,this.state.clusterName)}},{key:"onSort",value:function e(t,a){var r=Object(O.f)(this.state.dataSource,t,a);this.refreshTableData(r)}},{key:"render",value:function e(){var t=this;return this.state.mockVisable?this.mockDataHtml():this.state.historyVisable?this.historyHtml():i.a.createElement("div",null,i.a.createElement(ze,{style:Je.row},i.a.createElement(We,{align:"center"},i.a.createElement("span",{style:{fontWeight:"600"}},"Table Name:\xa0\xa0\xa0"),i.a.createElement(m.a,{placeholder:"TableName",hasClear:!0,onChange:this.handleFilterChange,style:{width:"200px"},value:this.state.searchValue})),i.a.createElement(We,{align:"center"},i.a.createElement(b.a,{type:"secondary",onClick:this.handelDialog},i.a.createElement(x.a,{type:"add"}),"Add Table"))),i.a.createElement(ue,{visable:this.state.addVisable,visableChange:this.addVisableChange,teamData:this.state.teamData,saveData:this.addTable,moudlue:"Table",value:this.state.formVal,name:this.state.moduleName}),i.a.createElement(S.a,{className:"simple-form-dialog",style:Je.simpleFormDialog,autoFocus:!1,footerAlign:"center",footer:i.a.createElement(b.a,{type:"primary",onClick:this.hideDetailDialog},"Cancel"),onClose:this.hideDetailDialog,cancelProps:{children:"Cancel"},isFullScreen:!0,visible:this.state.visible},i.a.createElement(f.default,{visible:this.state.describeLoading,style:{width:"100%"}},i.a.createElement("div",null,i.a.createElement(c.a,{title:"Describe Table "},i.a.createElement("ul",null,i.a.createElement("li",{style:Je.detailItem},i.a.createElement("div",{style:Je.detailTitle},"Table:"),i.a.createElement("div",null,this.state.detailRecord.name)),i.a.createElement("li",{style:Je.detailItem},i.a.createElement("div",{style:Je.detailTitle},"TopicName:"),i.a.createElement("div",null,this.state.detailRecord.topic)),i.a.createElement("li",{style:Je.detailItem},i.a.createElement("div",{style:Je.detailTitle},"Format:"),i.a.createElement("div",null,this.state.detailRecord.format)),i.a.createElement("li",{style:Je.detailItem},i.a.createElement("div",{style:Je.detailTitle},"Partitions:"),i.a.createElement("div",null,this.state.detailRecord.partitions)),i.a.createElement("li",{style:Je.detailItem},i.a.createElement("div",{style:Je.detailTitle},"Replication:"),i.a.createElement("div",null,this.state.detailRecord.replication)),i.a.createElement("li",{style:Je.detailItem},i.a.createElement("div",{style:Je.detailTitle},"SQL Text:"),i.a.createElement("div",null,this.state.detailRecord.statement)),i.a.createElement("li",{style:Je.detailItem},i.a.createElement("div",{style:Je.detailTitle},"Schema:")),i.a.createElement("li",null,i.a.createElement(g.a,{size:"small",dataSource:this.state.detailRecord.fields},i.a.createElement(g.a.Column,{title:"Name",dataIndex:"name"}),i.a.createElement(g.a.Column,{title:"Type",dataIndex:"schema.type"})))))))),i.a.createElement(g.a,{loading:this.state.isLoading,dataSource:this.state.pageData,hasBorder:!1,onSort:function e(a,r){return t.onSort(a,r)}},i.a.createElement(g.a.Column,{title:"Table",dataIndex:"name",cell:this.renderTopic,sortable:!0}),i.a.createElement(g.a.Column,{title:"Owner",dataIndex:"owner.name"}),i.a.createElement(g.a.Column,{title:"Team",dataIndex:"team.name"}),i.a.createElement(g.a.Column,{title:"Operation",cell:this.renderOper})),i.a.createElement(_.a,{dataSource:this.state.filterDataSource,redrawPageData:this.redrawPageData}))}}]),a}(o.Component))||Oe,Je={link:{margin:"0 5px",color:"rgba(49, 128, 253, 0.65)",cursor:"pointer",textDecoration:"none"},loading:{width:"100%"},separator:{margin:"0 8px",display:"inline-block",height:"12px",width:"1px",verticalAlign:"middle",background:"#e8e8e8"},row:{margin:"20px 4px 20px"},operBtn:{display:"inline-block",width:"24px",height:"24px",borderRadius:"999px",color:"#929292",background:"#f2f2f2",textAlign:"center",cursor:"pointer",lineHeight:"24px",marginRight:"6px"},detailItem:{padding:"15px 0px",display:"flex",borderTop:"1px solid #EEEFF3"},detailTitle:{marginRight:"30px",textAlign:"left",width:"50px",color:"#999999"},simpleFormDialog:{width:"640px"}},Ye=Ue,$e;function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t,a){return t&&Xe(e.prototype,t),a&&Xe(e,a),e}function tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}function at(e,t){return(at=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function rt(e){var t=it();return function a(){var r=lt(e),n;if(t){var o=lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var st=C.a.Row,ut=C.a.Col,dt=Object(T.withRouter)($e=function(e){tt(a,e);var t=rt(a);function a(){var e;Ze(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ct(ot(e=t.call.apply(t,[this].concat(n))),"state",{ksqlServerId:e.props.match.params.ksqlServerId,clusterName:e.props.match.params.clusterName,isLoading:!1,filterDataSource:[],dataSource:[],pageData:[],visible:!1,detailRecord:{}}),ct(ot(e),"renderOper",(function(t,a,r){return i.a.createElement("div",null,i.a.createElement("a",{style:mt.link,onClick:function t(){return e.handelDetail(r)}},"Explain"),i.a.createElement("span",{style:mt.separator}),i.a.createElement("a",{style:mt.link,onClick:function t(){return e.handleDelete(r)}},"Terminate"))})),ct(ot(e),"handelDetail",(function(t){e.setState({visible:!e.state.visible,detailRecord:t})})),ct(ot(e),"hideDetailDialog",(function(){e.setState({visible:!1})})),ct(ot(e),"handleDelete",(function(t){S.a.confirm({content:"Do you want to Terminate  ".concat(t.id,"?"),onOk:function a(){e.handleDeletes(t)},okProps:{children:"OK"},cancelProps:{children:"Cancel"}})})),ct(ot(e),"handleDeletes",(function(t){var a=e.state.ksqlServerId,r=e.state.clusterName;e.setState({isLoading:!0},(function(){L.a.delete("/ksql/terminate_query?ksqlServerId=".concat(a,"&clusterName=").concat(r,"&queryId=").concat(t.id)).then((function(t){200===t.data.code?(e.getQueries(a,r),E.a.success(t.data.message||"Terminate query success")):E.a.error(t.data.message||"Terminate query has error"),e.setState({isLoading:!1})})).catch((function(e){console.error(e)}))}))})),ct(ot(e),"redrawPageData",(function(t){e.setState({pageData:t})})),ct(ot(e),"refreshTableData",(function(t){e.setState({filterDataSource:t})})),ct(ot(e),"handleFilterChange",(function(t){var a=e.state.dataSource,r=[];0===t.trim().length?r=a:a.forEach((function(e){e.id.toLocaleLowerCase().includes(t.toLocaleLowerCase())&&r.push(e)})),e.setState({searchValue:t}),e.refreshTableData(r)})),ct(ot(e),"getQueries",(function(t,a){e.setState({isLoading:!0},(function(){L.a.post("/ksql/show_queries?ksqlServerId=".concat(t,"&clusterName=").concat(a)).then((function(t){if(200===t.data.code){var a=t.data.data;e.setState({dataSource:a,filterDataSource:a,isLoading:!1})}else E.a.error(t.data.message),e.setState({isLoading:!1})})).catch((function(e){console.error(e)}))}))})),e}return et(a,[{key:"componentDidMount",value:function e(){this.getQueries(this.state.ksqlServerId,this.state.clusterName)}},{key:"render",value:function e(){return i.a.createElement("div",null,i.a.createElement(st,{style:mt.row},i.a.createElement(ut,{align:"center"},i.a.createElement("span",{style:{fontWeight:"600"}},"Query ID:\xa0\xa0\xa0"),i.a.createElement(m.a,{placeholder:"Query ID",hasClear:!0,onChange:this.handleFilterChange,style:{width:"200px"},value:this.state.searchValue}))),i.a.createElement(S.a,{className:"simple-form-dialog",style:mt.simpleFormDialog,autoFocus:!1,footerAlign:"center",footer:i.a.createElement(b.a,{type:"primary",onClick:this.hideDetailDialog},"Cancel"),onClose:this.hideDetailDialog,isFullScreen:!0,visible:this.state.visible},i.a.createElement("div",null,i.a.createElement(c.a,{title:"Explain Queries "},i.a.createElement("ul",null,i.a.createElement("li",{style:mt.detailItem},i.a.createElement("div",{style:mt.detailTitle},"QueryID:"),i.a.createElement("div",null,this.state.detailRecord.id)),i.a.createElement("li",{style:mt.detailItem},i.a.createElement("div",{style:mt.detailTitle},"Source:"),i.a.createElement("div",null,this.state.detailRecord.source)),i.a.createElement("li",{style:mt.detailItem},i.a.createElement("div",{style:mt.detailTitle},"Sink:"),i.a.createElement("div",null,this.state.detailRecord.sinks)),i.a.createElement("li",{style:mt.detailItem},i.a.createElement("div",{style:mt.detailTitle},"State:"),i.a.createElement("div",null,this.state.detailRecord.state)),i.a.createElement("li",{style:mt.detailItem},i.a.createElement("div",{style:mt.detailTitle},"SqlText:"),i.a.createElement("div",null,this.state.detailRecord.queryString)))))),i.a.createElement(g.a,{loading:this.state.isLoading,dataSource:this.state.pageData,hasBorder:!1},i.a.createElement(g.a.Column,{title:"Query ID",dataIndex:"id"}),i.a.createElement(g.a.Column,{title:"Source",dataIndex:"source"}),i.a.createElement(g.a.Column,{title:"Sink",dataIndex:"sinks"}),i.a.createElement(g.a.Column,{title:"State",dataIndex:"state"}),i.a.createElement(g.a.Column,{title:"Operation",cell:this.renderOper})),i.a.createElement(_.a,{dataSource:this.state.filterDataSource,redrawPageData:this.redrawPageData}))}}]),a}(o.Component))||$e,mt={simpleFormDialog:{width:"640px"},link:{margin:"0 5px",color:"rgba(49, 128, 253, 0.65)",cursor:"pointer",textDecoration:"none"},loading:{width:"100%"},separator:{margin:"0 8px",display:"inline-block",height:"12px",width:"1px",verticalAlign:"middle",background:"#e8e8e8"},row:{margin:"20px 4px 20px"},operBtn:{display:"inline-block",width:"24px",height:"24px",borderRadius:"999px",color:"#929292",background:"#f2f2f2",textAlign:"center",cursor:"pointer",lineHeight:"24px",marginRight:"6px"},detailItem:{padding:"15px 0px",display:"flex",borderTop:"1px solid #EEEFF3"},detailTitle:{marginRight:"30px",textAlign:"left",width:"42px",color:"#999999"},detailBody:{textAlign:"left"}},ht=dt;function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e,t,a){return t&&gt(e.prototype,t),a&&gt(e,a),e}function bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}function vt(e,t){return(vt=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function Et(e){var t=wt();return function a(){var r=Ct(e),n;if(t){var o=Ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kt(this,n)}}function kt(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return St(e)}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Dt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var xt=function(e){bt(a,e);var t=Et(a);function a(){var e;pt(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Dt(St(e=t.call.apply(t,[this].concat(n))),"state",{streams:i.a.createElement(Ae,null),tables:i.a.createElement(Ye,null),queries:i.a.createElement(ht,null)}),Dt(St(e),"onTabChanged",(function(t){var a="/ksql/".concat(e.props.match.params.id,"/").concat(e.props.match.params.clusterName,"/").concat(e.props.match.params.ksqlServerId,"/").concat(t);e.props.history.push(a);var r=(new Date).getTime();"streams"===t?e.setState({streams:i.a.createElement(Ae,{key:r})}):"tables"===t?e.setState({tables:i.a.createElement(Ye,{key:r})}):"queries"===t&&e.setState({queries:i.a.createElement(ht,{key:r})})})),e}return yt(a,[{key:"render",value:function e(){var t=[{link:"",text:"KSQL"},{link:"#/ksql/list",text:"List"}];return i.a.createElement("div",null,i.a.createElement(s.a,{items:t,title:"KSQL Home"}),i.a.createElement(c.a,{style:_t.container},i.a.createElement(n.a,{onChange:this.onTabChanged,defaultActiveKey:this.props.match.params.tab},i.a.createElement(n.a.Item,{title:"Console",key:"console"},i.a.createElement(u.default,null)," "),i.a.createElement(n.a.Item,{title:"Streams",key:"streams"},this.state.streams),i.a.createElement(n.a.Item,{title:"Tables",key:"tables"},this.state.tables," "),i.a.createElement(n.a.Item,{title:"Queries",key:"queries"},this.state.queries," "))))}}]),a}(o.Component),_t={container:{margin:"20px",padding:"10px 20px 20px",minHeight:"600px"}},Tt=t.default=xt}}]);