(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1050:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(109),i=r(56),c=r.n(i),l=r(67),s=r(39),u=r(162),f=r(23),p=r(54),h=r(22),d=r(66),y=r(16),m=r(21),A=r(187),g=r(30),v=r(143),b=r(979),E=r(108),S=r(992),w=r.n(S),C=r(993),O=r.n(C),D=r(144),F=r.n(D),k;function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t,r){return t&&B(e.prototype,t),r&&B(e,r),e}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}function V(e){var t=Q();return function r(){var n=_(e),a;if(t){var o=_(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return T(this,a)}}function T(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=Object(g.withRouter)(k=function(e){x(r,e);var t=V(r);function r(){var e;N(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return J(R(e=t.call.apply(t,[this].concat(o))),"state",{loading:!1,dataSource:[],filterDataSource:[],pageData:[]}),J(R(e),"componentWillUnmount",(function(){e.mounted=!1})),J(R(e),"fetchData",(function(t){e.setState({loading:!0},(function(){var r="monitor_topic";m.a.get("/monitor/favorite?type=".concat(r,"&cluster=").concat(t)).then((function(t){if(200===t.data.code){if(e.mounted){var r=Object(A.e)(t.data.data,"topicName");e.setState({dataSource:r,filterDataSource:r,loading:!1})}}else y.a.error(t.data.message)})).catch((function(e){console.error(e)}))}))})),J(R(e),"refreshTableData",(function(t){e.setState({filterDataSource:t})})),J(R(e),"redrawPageData",(function(t){e.setState({pageData:t})})),J(R(e),"handleCollect",(function(t){var r="monitor_topic";m.a.get("monitor/topic/collection?name=".concat(t.topicName,"&&collection=").concat(t.collections,"&&clusterId=").concat(t.clusterID,"&&type=").concat(r)).then((function(t){if(200===t.data.code){if(e.mounted){var r=Object(E.a)("myFavorite").id,n;Object(E.a)("myFavorite").isAll?e.fetchData(-1):e.fetchData(r)}}else y.a.error(t.data.message)})).catch((function(t){console.error(t),e.setState({isLoading:!1})}))})),J(R(e),"renderTopic",(function(t,r,n){return a.a.createElement("div",null,a.a.createElement("a",{style:L.topicLink,onClick:function t(){return e.handelDetail(n)}},n.topicName))})),J(R(e),"handelDetail",(function(t){e.props.history.push("/monitor/topic/consumer_offset/".concat(t.clusterID,"/").concat(t.topicName))})),J(R(e),"renderOption",(function(t,r,n){return a.a.createElement("div",null,a.a.createElement("a",{style:L.link,onClick:function t(){return e.handlePrdouct(n)}},"Producer"),a.a.createElement("span",{style:L.separator}),a.a.createElement("span",{title:"Consumer",style:L.operBtn},a.a.createElement("a",{style:L.link,onClick:function t(){return e.handelConsumer(n)}},"Consumer")))})),J(R(e),"handlePrdouct",(function(t){e.props.history.push("/monitor/producer/metric/".concat(t.clusterID,"/").concat(t.clusterName,"/").concat(t.topicName))})),J(R(e),"handelConsumer",(function(t){e.props.history.push("/monitor/consumer/topic/consumer_offsets/".concat(t.clusterID,"/").concat(t.clusterName,"/").concat(t.topicName))})),J(R(e),"rendercollection",(function(t,r,n){var o=null;return o=n.collections?a.a.createElement(h.a,{text:!0,onClick:function t(){return e.handleCollect(n)}},a.a.createElement(F.a,{height:13,width:15,src:w.a,style:{cursor:"pointer"}})):a.a.createElement(h.a,{text:!0,onClick:function t(){return e.handleCollect(n)}},a.a.createElement(F.a,{height:13,width:15,src:O.a,style:{cursor:"pointer"}})),a.a.createElement("div",null,o)})),e}return P(r,[{key:"componentDidMount",value:function e(){}},{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"onSort",value:function e(t,r){var n=Object(A.f)(this.state.filterDataSource,t,r);this.refreshTableData(n)}},{key:"render",value:function e(){var t=this,r=this.state.isLoading;return a.a.createElement("div",null,a.a.createElement(s.default,{visible:this.state.loading,style:L.loading},a.a.createElement(b.a,{dataSource:this.state.dataSource,refreshTableData:this.refreshTableData,refreshDataSource:this.fetchData,selectTitle:"Cluster",selectField:"clusterName",searchTitle:"Filter",searchField:"topicName",searchPlaceholder:"Input Topic Name",id:"myFavorite"}),a.a.createElement(f.a,{loading:r,dataSource:this.state.pageData,hasBorder:!1,onSort:function e(r,n){return t.onSort(r,n)}},a.a.createElement(f.a.Column,{title:"Topic Name",dataIndex:"topicName",sortable:!0}),a.a.createElement(f.a.Column,{title:"Cluster",dataIndex:"clusterName"}),a.a.createElement(f.a.Column,{title:"",cell:this.rendercollection}),a.a.createElement(f.a.Column,{title:"Options",cell:this.renderOption})),a.a.createElement(v.a,{dataSource:this.state.filterDataSource,redrawPageData:this.redrawPageData})))}}]),r}(n.Component))||k,L={topicLink:{margin:"0 5px",color:"#1111EE",cursor:"pointer",textDecoration:"none"},loading:{width:"100%"},editIcon:{color:"#999",cursor:"pointer"},separator:{margin:"0 8px",display:"inline-block",height:"12px",width:"1px",verticalAlign:"middle",background:"#e8e8e8"},link:{margin:"0 5px",color:"rgba(49, 128, 253, 0.65)",cursor:"pointer",textDecoration:"none"}};function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t,r){return t&&K(e.prototype,t),r&&K(e,r),e}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}function U(e,t){return(U=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}function X(e){var t=Z();return function r(){var n=$(e),a;if(t){var o=$(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return G(this,a)}}function G(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var ee=function(e){z(r,e);var t=X(r);function r(){return Y(this,r),t.apply(this,arguments)}return q(r,[{key:"render",value:function e(){var t=[{link:"",text:"Monitor"},{link:"",text:"Favorites"}];return a.a.createElement("div",null,a.a.createElement(o.a,{items:t,title:"Favorites"}),a.a.createElement(c.a,{style:te.container},a.a.createElement(M,null)))}}]),r}(n.Component),te={container:{margin:"20px",padding:"10px 20px 20px",minHeight:"600px"}},re=t.default=ee},979:function(e,t,r){"use strict";var n=r(434),a=r(309),o=r(36),i=r(11),c=r(74),l=r(20),s=r(142),u=r(53),f=r(66),p=r(16),h=r(99),d=r(33),y=r(1),m=r.n(y),A=r(21),g=r(108);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t&&E(e.prototype,t),r&&E(e,r),e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}function O(e){var t=k();return function r(){var n=j(e),a;if(t){var o=j(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return D(this,a)}}function D(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=d.a.Row,P=d.a.Col,x=function(e){w(r,e);var t=O(r);function r(e){var n;b(this,r),N(F(n=t.call(this,e)),"componentWillUnmount",(function(){n.mounted=!1})),N(F(n),"arrayIsEqual",(function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1){var n=JSON.stringify(e[r]),a=JSON.stringify(t[r]);if(0!==n.localeCompare(a))return!1}return!0})),N(F(n),"refreshTableData",(function(e){n.props.refreshTableData(e)})),N(F(n),"getCluster",(function(){var e=[{value:"-1",label:"ALL"}];A.a.get("/cluster").then((function(t){if(200===t.data.code){var r=t.data.data[0].id,a=t.data.data[0].name,o=n.state.clusterValue;t.data.data.forEach((function(t){t.id<r&&(r=t.id,a=t.name),e.push({value:t.id,label:t.name})}));var i=Object(g.a)(n.props.id).id;if(null!=i?n.props.refreshDataSource(i):n.props.refreshDataSource(r),void 0===o&&"settingUser"!==n.props.id&&"settingTeam"!==n.props.id){var c={id:r,cluster:a,isAll:!1};Object(g.d)(n.props.id,c),o=a}n.setState({clusterSelectData:e,clusterValue:o})}})).catch((function(e){console.error("error",e),void 0!==e.response&&void 0!==e.response.status&&""!==e.response.status&&null!=e.response.status&&null!=e.response.status&&(401===e.response.status?p.a.error({content:"Please login!",closeable:!0}):p.a.error({content:"get cluster faily!",duration:1e4,closeable:!0}))}))})),N(F(n),"handleClusterFilterChange",(function(e,t){n.props.refreshDataSource(t.value);var r=n.state.dataSource;e=t.label.toString();var a={id:t.value,cluster:t.label,isAll:!1};"-1"===t.value&&(a.isAll=!0),Object(g.d)(n.props.id,a);var o=n.filterByPara(r,n.state.clusterField,e,n.state.searchField,n.state.searchValue,n.state.switchField,n.state.switchValue);n.setState({clusterValue:e}),n.refreshTableData(o)})),N(F(n),"handleFilterChange",(function(e){e=e.toString();var t=n.state.dataSource,r=n.filterByPara(t,n.state.clusterField,n.state.clusterValue,n.state.searchField,e,n.state.switchField,n.state.switchValue);n.setState({searchValue:e}),n.refreshTableData(r),n.setSesion("".concat(n.props.id,"Search"),e)})),N(F(n),"onSwitchChange",(function(e){var t=n.state.dataSource,r=n.filterByPara(t,n.state.clusterField,n.state.clusterValue,n.state.searchField,n.state.searchValue,n.state.switchField,e);n.setState({switchValue:e}),n.refreshTableData(r),n.setSesion("".concat(n.props.id,"Switch"),e)})),N(F(n),"setSesion",(function(e,t){void 0!==e&&sessionStorage.setItem(e,t)})),N(F(n),"initData",(function(e){var t=JSON.parse(JSON.stringify(e)),r=n.filterByPara(t,n.state.clusterField,n.state.clusterValue,n.state.searchField,n.state.searchValue,n.state.switchField,n.state.switchValue);n.setState({dataSource:t}),n.refreshTableData(r)})),N(F(n),"filterByPara",(function(e,t,r,a,o,i,c){var l=JSON.parse(JSON.stringify(e));return n.isNullOrEmptyStr(i)||c&&"false"!==c||(l=l.filter((function(e){return!e[i].startsWith("_")}))),n.isNullOrEmptyStr(t)||n.isNullOrEmptyStr(r)||"ALL"===r||(l=n.searchdata(l,t,r)),n.isNullOrEmptyStr(o)||(l=n.searchdata(l,a,o)),l})),N(F(n),"searchdata",(function(e,t,r){var n=t.split(",");return e.filter((function(e){for(var t=!1,a=0,o=n.length;a<o;a+=1){for(var i=n[a].split("."),c=e,l=0,s=i.length;l<s;l+=1)c=c[i[l]];if(-1!==c.toLocaleLowerCase().search(r.toLocaleLowerCase())){t=!0;break}}return t}))})),N(F(n),"isNullOrEmptyStr",(function(e){return null==e||""===e})),N(F(n),"selectView",(function(e){return m.a.createElement(P,{align:"center"},m.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),m.a.createElement(u.a,{showSearch:!0,dataSource:n.state.clusterSelectData,placeholder:"please select cluster",style:{width:"300px"},onChange:function e(t,r,a){n.handleClusterFilterChange(t,a)},value:n.state.clusterValue}))})),N(F(n),"filterView",(function(e,t){return m.a.createElement(P,{align:"center"},m.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),m.a.createElement(l.a,{placeholder:n.isNullOrEmptyStr(t)?"Input filter value":t,hasClear:!0,onChange:n.handleFilterChange,style:{width:"300px"},value:n.state.searchValue}))})),N(F(n),"parseBoolean",(function(e){return"true"===e||"TRUE"===e||"True"===e||"false"!==e&&"FALSE"!==e&&"False"!==e&&void 0})),N(F(n),"getFilterData",(function(e){var t=JSON.parse(JSON.stringify(e)),r;return n.filterByPara(t,n.state.clusterField,n.state.clusterValue,n.state.searchField,n.state.searchValue,n.state.switchField,n.state.switchValue)})),N(F(n),"switchView",(function(){var e=n.state.switchValue;return"string"==typeof n.state.switchValue&&(e=n.parseBoolean(n.state.switchValue.trim())),m.a.createElement(P,{align:"center"},m.a.createElement("div",{style:{display:"flex"}},m.a.createElement("span",{style:I.special},"Include special topic:\xa0\xa0"),m.a.createElement(a.a,{onChange:n.onSwitchChange,checked:e,defaultChecked:e,checkedChildren:m.a.createElement(i.a,{type:"select",size:"xs"}),unCheckedChildren:m.a.createElement(i.a,{type:"close",size:"xs"})})))})),void 0!==n.props.onRef&&n.props.onRef(F(n));var o=sessionStorage.getItem("".concat(n.props.id,"Search")),c=sessionStorage.getItem("".concat(n.props.id,"Switch"));return n.state={dataSource:n.props.dataSource,clusterSelectData:[],clusterValue:Object(g.a)(n.props.id).cluster,clusterField:n.props.selectField,searchValue:null===o?"":o,searchField:n.props.searchField,switchField:n.props.switchField,switchValue:null!==c&&""!==c&&c},n}return S(r,[{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentDidMount",value:function e(){this.getCluster()}},{key:"componentWillReceiveProps",value:function e(t){this.validateCondition(this.state.dataSource,t.dataSource)&&(this.setState({dataSource:t.dataSource}),this.initData(t.dataSource))}},{key:"validateCondition",value:function e(t,r){return(null!=t||null!=r)&&((void 0!==t||void 0!==r)&&((0!==t.length||0!==r.length)&&(!this.arrayIsEqual(t,r)&&t!==r)))}},{key:"render",value:function e(){var t=this.props.selectTitle,r=this.props.searchTitle,n=this.props.searchPlaceholder,a=this.isNullOrEmptyStr(t)?"":this.selectView(t),o=this.isNullOrEmptyStr(r)?"":this.filterView(r,n),i=this.isNullOrEmptyStr(this.props.otherComponent)?"":this.props.otherComponent,c=this.isNullOrEmptyStr(this.props.switchField)?"":this.switchView();return m.a.createElement(B,{style:I.row},a,o,i,c)}}]),r}(y.Component),I={row:{margin:"20px 4px 20px"},special:{fontFamily:'Roboto, "Helvetica Neue", Helvetica, Tahoma, Arial, "PingFang SC", "Microsoft YaHei"',fontSize:"12px",lineHeight:"1.28571",color:"#333333",alignSelf:"center",fontWeight:"600"}},V=t.a=x},992:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/wAALCAAQABABAREA/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEFCP/EACEQAAEEAQQDAQAAAAAAAAAAAAIBAwQFEQYIEiIAByET/9oACAEBAAA/ANj7mN2mnfUNfd6LgwrkNYuwVStM4ShGEnEwL6OkqIYjlV6ovYOK4+4W2fdrpz29X0eip8K5PWTUFEsjCCpxiJtME+roqqAJYReyD2PimfmaW6XbzebhXtI00C0r6mtq5EqRYz3mv0kCJI2INsgmOWe6rkhTqK/Vwnhtb28XW3p/V1NNtYFvW2j8WRXT2mfykEIi4JtvAuePHoqYIkXkS/Fynn//2Q=="},993:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/wAALCAAQABABAREA/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECCf/EACEQAAEEAgMAAwEAAAAAAAAAAAIBAwQFBgcREhMAFCEj/9oACAEBAAA/ANBs1240cu711rmPZ2OdRgajCCU0oodc5IT+UmRIJtGEbAVV3r6cmjaiKKq8fFhW222pdJrnY7FnX51JF2KQrTShh2TkdF9JMeQLasK2YojvXvyCOIJIipx8jY9DnxbMxLKNd4xVyX2a6zhWVjOm/WaZbMo6stuoCE6+PPsYtinHcP02+3ZTXNFn6bOyzKNiYxVxnnaysg1tlBmfZaeACkK+DSGgusDz4mTZJx2P8Nzqip//2Q=="}}]);