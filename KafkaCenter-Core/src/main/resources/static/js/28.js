(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1038:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(56),i=a.n(o),l=a(109),c=a(128),s=a(47),u=a(142),f=a(53),p=a(162),d=a(23),m=a(66),h=a(16),y=a(99),b=a(33),v=a(68),g=a.n(v),E=a(44),w=a.n(E),O=a(14),S=a(21),j=a(310),D=a(187),C=a(143),T=a(979),k=a(108),x=a(67),P=a(39),R=a(54),F=a(22),N=a(74),B=a(20),V=a(231),_=a.n(V);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,a){return t&&q(e.prototype,t),a&&q(e,a),e}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function z(e){var t=U();return function a(){var r=K(e),n;if(t){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Y=b.a.Row,G=b.a.Col,X={key:"",value:""},Z=function(e){A(a,e);var t=z(a);function a(e){var r;return L(this,a),Q(J(r=t.call(this,e)),"onFormChange",(function(e){r.setState({producer:e})})),Q(J(r),"onReset",(function(){r.setState({producer:{key:"",value:""}})})),Q(J(r),"onSend",(function(){r.refForm.validateFields((function(e){if(!e){r.setState({visible:!0});var t=r.state.producer;t.clusterID=r.state.queriesRecord.cluster.id,t.topicName=r.state.queriesRecord.topicName,S.a.post("/topic/list/producer",t).then((function(e){200===e.data.code?r.setState({producerResult:e.data.message,visible:!1}):(h.a.error({content:e.data.message,duration:5e3}),r.setState({visible:!1}))})).catch((function(e){console.error(e),r.setState({visible:!1})}))}}))})),Q(J(r),"checkKey",(function(e,t,a){""===t.trim()?a("Key is required"):a()})),Q(J(r),"checkValue",(function(e,t,a){""===t.trim()?a("Value is required"):a()})),r.state={queriesRecord:r.props.record,producer:X,producerResult:"",visible:!1},r}return W(a,[{key:"componentWillReceiveProps",value:function e(t){this.setState({queriesRecord:t.record})}},{key:"componentWillMount",value:function e(){this.setState({producer:{key:"",value:""}})}},{key:"render",value:function e(){var t=this;return n.a.createElement(P.default,{tip:"Query...",visible:this.state.visible,fullScreen:!0,shape:"fusion-reactor"},n.a.createElement(Y,{align:"top"},n.a.createElement(G,{span:"12",style:{height:"650px",lineHeight:"50px"}},n.a.createElement(_.a,{style:$.panel},n.a.createElement(_.a.Body,null,n.a.createElement(O.FormBinderWrapper,{ref:function e(a){t.refForm=a},value:this.state.producer,onChange:this.onFormChange},n.a.createElement("div",null,n.a.createElement(Y,{style:$.formRow},n.a.createElement(G,{span:"8"},n.a.createElement("label",{style:$.formLabel},"Kafka Cluster:")),n.a.createElement(G,{span:"16"},null==this.state.queriesRecord.cluster?"":this.state.queriesRecord.cluster.name)),n.a.createElement(Y,{style:$.formRow},n.a.createElement(G,{span:"8"},n.a.createElement("label",{style:$.formLabel},"Topic Name:")),n.a.createElement(G,{span:"16"},this.state.queriesRecord.topicName)),n.a.createElement(Y,{style:$.formRow},n.a.createElement(G,{span:"8"},n.a.createElement("label",{style:$.formLabel},"Key:")),n.a.createElement(G,{span:"16"},n.a.createElement(O.FormBinder,{name:"key",required:!0,message:"required",validator:this.checkKey},n.a.createElement(B.a,{style:$.input,placeholder:"Enter key"})),n.a.createElement(O.FormError,{name:"key"}))),n.a.createElement(Y,{style:$.formRow},n.a.createElement(G,{span:"8"},n.a.createElement("label",{style:$.formLabel},"Value:")),n.a.createElement(G,{span:"16"},n.a.createElement(O.FormBinder,{name:"value",required:!0,message:"required",validator:this.checkValue},n.a.createElement(B.a.TextArea,{style:$.input,placeholder:"Enter value",rows:15})),n.a.createElement(O.FormError,{name:"value"}))),n.a.createElement(Y,{style:$.formRow}),n.a.createElement("hr",null),n.a.createElement(Y,{style:$.formRow},n.a.createElement(G,{span:"24",style:{textAlign:"center"}},n.a.createElement(F.a,{type:"primary",size:"large",onClick:this.onSend},n.a.createElement(g.a,{type:"forward"})," Send"),"\xa0\xa0\xa0\xa0",n.a.createElement(F.a,{type:"normal",size:"large",onClick:this.onReset},n.a.createElement(g.a,{type:"exchange"})," Reset")))))))),n.a.createElement(G,{span:"12",style:{height:"650px",fontSize:"10px",lineHeight:"20px"}},n.a.createElement(_.a,{style:$.panelConsole},n.a.createElement(_.a.Body,null,this.state.producerResult)))))}}]),a}(r.Component);Q(Z,"displayName","Producer");var $={panelConsole:{height:"650px",backgroundColor:"#002b36",overflowY:"scroll",color:"greenyellow"},panel:{height:"550px",marginBottom:"10px"},formRow:{marginTop:20},formLabel:{lineHeight:"26px",fontWeight:"700",textAlign:"right"}};function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(Object(a),!0).forEach((function(t){de(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,a){return t&&ne(e.prototype,t),a&&ne(e,a),e}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}function le(e,t){return(le=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function ce(e){var t=fe();return function a(){var r=pe(e),n;if(t){var o=pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return se(this,n)}}function se(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function de(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var me=function(e){ie(a,e);var t=ce(a);function a(e){var r;return re(this,a),de(ue(r=t.call(this,e)),"hideDetailDialog",(function(){r.props.hideDetailDialog()})),de(ue(r),"onOk",(function(){r.hideDetailDialog()})),r.state={dialogObj:r.props.dialogObj},r}return oe(a,[{key:"componentWillReceiveProps",value:function e(t){this.setState({dialogObj:t.dialogObj})}},{key:"render",value:function e(){var t=ae({},he.simpleFormDialog),a={children:"OK"},r={children:"Cancel"};return n.a.createElement(s.a,{className:"simple-form-dialog",style:t,autoFocus:!1,footerAlign:"center",onOk:this.onOk,onCancel:this.hideDetailDialog,onClose:this.hideDetailDialog,isFullScreen:!0,visible:this.state.dialogObj.visible,okProps:a,cancelProps:r},n.a.createElement("div",{className:"detail-table"},n.a.createElement(i.a,{title:"Topic Detail"},n.a.createElement("ul",{style:he.detailTable},n.a.createElement("li",{style:he.detailItem},n.a.createElement("div",{style:he.detailTitle},"Topic Name:"),n.a.createElement("div",{style:he.detailBody},this.state.dialogObj.record.topicName)),n.a.createElement("li",{style:he.detailItem},n.a.createElement("div",{style:he.detailTitle},"Kafka Cluster:"),n.a.createElement("div",{style:he.detailBody},this.state.dialogObj.record.cluster?this.state.dialogObj.record.cluster.name:"")),n.a.createElement("li",{style:he.detailItem},n.a.createElement("div",{style:he.detailTitle},"Owner:"),n.a.createElement("div",{style:he.detailBody},this.state.dialogObj.record.owner?this.state.dialogObj.record.owner.name:"")),n.a.createElement("li",{style:he.detailItem},n.a.createElement("div",{style:he.detailTitle},"Team:"),n.a.createElement("div",{style:he.detailBody},this.state.dialogObj.record.team?this.state.dialogObj.record.team.name:"")),n.a.createElement("li",{style:he.detailItem},n.a.createElement("div",{style:he.detailTitle},"TTL:"),n.a.createElement("div",{style:he.detailBody},Object(D.h)(this.state.dialogObj.record.ttl),"\xa0(hour)")),n.a.createElement("li",{style:he.detailItem},n.a.createElement("div",{style:he.detailTitle},"Partitions:"),n.a.createElement("div",{style:he.detailBody},this.state.dialogObj.record.partition)),n.a.createElement("li",{style:he.detailItem},n.a.createElement("div",{style:he.detailTitle},"Replication Factor:"),n.a.createElement("div",{style:he.detailBody},this.state.dialogObj.record.replication)),n.a.createElement("li",{style:he.detailItem},n.a.createElement("div",{style:he.detailTitle},"Comments:"),n.a.createElement("div",{style:he.detailBody},this.state.dialogObj.record.comments))))))}}]),a}(r.Component);de(me,"displayName","DetailDialog");var he={simpleFormDialog:{width:"640px"},detailItem:{padding:"15px 0px",display:"flex",borderTop:"1px solid #EEEFF3"},detailTitle:{marginRight:"30px",textAlign:"right",width:"120px",color:"#999999"}},ye=a(30),be;function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(a),!0).forEach((function(t){Re(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,a){return t&&Oe(e.prototype,t),a&&Oe(e,a),e}function je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}function De(e,t){return(De=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function Ce(e){var t=xe();return function a(){var r=Pe(e),n;if(t){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Te(this,n)}}function Te(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ke(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Fe=b.a.Row,Ne=b.a.Col,Be=Object(ye.withRouter)(be=function(e){je(a,e);var t=Ce(a);function a(){var e;return we(this,a),Re(ke(e=t.call(this)),"componentWillUnmount",(function(){e.mounted=!1})),Re(ke(e),"fetchTeam",(function(){S.a.get("/team/").then((function(t){if(200===t.data.code){if(e.mounted){var a=e.resouceData(t.data.data);e.setState({teamData:a})}}else h.a.error(t.data.message)})).catch((function(e){console.error(e)}))})),Re(ke(e),"fetchUser",(function(t){S.a.get("/team/userinfos/".concat(t)).then((function(t){if(200===t.data.code){if(e.mounted){var a=e.resouceData(t.data.data);e.setState({ownerData:a})}}else h.a.error(t.data.message)})).catch((function(e){console.error(e)}))})),Re(ke(e),"resouceData",(function(e){var t=[];return e.forEach((function(e){var a={value:e.id,label:e.name};t.push(a)})),t})),Re(ke(e),"fetchData",(function(t){e.setState({isLoading:!0},(function(){S.a.get("/topic/list?cluster=".concat(t)).then((function(t){if(200===t.data.code){if(e.mounted){var a=null!=sessionStorage.getItem("topicTopicListSwitch")&&sessionStorage.getItem("topicTopicListSwitch"),r=Object(D.d)(t.data.data,"topicName"),n=r;a&&"false"!==a||(r=r.filter((function(e){return!e.topicName.startsWith("_")})));var o=sessionStorage.getItem("topicTopicListSearch");void 0!==o&&null!=o&&""!==o&&(r=r.filter((function(e){return-1!==e.topicName.toLowerCase().search(o.toLowerCase())}))),e.setState({filterDataSource:r,dataSource:n,isLoading:!1})}}else h.a.error(t.data.message)})).catch((function(e){console.error(e)}))}))})),Re(ke(e),"refreshTableData",(function(t){e.setState({filterDataSource:t})})),Re(ke(e),"renderBytes",(function(e){return null!==e&&e?-1===e?"-":Object(D.a)(e):0===e?Object(D.a)(0):"-"})),Re(ke(e),"handelDetail",(function(t){e.setState({dialogObj:{record:t,visible:!e.state.dialogObj.visible}})})),Re(ke(e),"handelQueries",(function(t){e.setState({isQueries:!0,queriesRecord:t})})),Re(ke(e),"handleUpdate",(function(t){e.fetchTeam();var a=t.cluster.name;e.setState({uvisable:!e.state.uvisable,value:t,spanCluster:a})})),Re(ke(e),"renderOper",(function(t,a,r){return n.a.createElement("div",null,n.a.createElement("a",{style:Ve.link,onClick:function t(){return e.handelDetail(r)}},"Detail"),n.a.createElement("span",{style:Ve.separator}),n.a.createElement("span",{title:"Mock",style:Ve.operBtn},n.a.createElement("a",{style:Ve.link,onClick:function t(){return e.handelQueries(r)}},"Mock")),n.a.createElement(j.a,{rolename:"admin"},n.a.createElement("span",{style:Ve.separator}),n.a.createElement("span",{title:"Modify",style:Ve.operBtn},n.a.createElement("a",{style:Ve.link,onClick:function t(){return e.handleUpdate(r)}},"Modify"))))})),Re(ke(e),"hideDetailDialog",(function(){e.setState({dialogObj:{record:{},visible:!1}})})),Re(ke(e),"backward",(function(){e.setState({isQueries:!1});var t=Object(k.a)("topicTopicList").id;e.fetchData(t)})),Re(ke(e),"onOk",(function(){e.refForm.validateAll((function(t){if(!t){var a=e.state.value;S.a.post("/topic/update",a).then((function(t){200===t.data.code?e.mounted&&h.a.success(t.data.message):h.a.error(t.data.message),e.onCancel();var a=Object(k.a)("topicTopicList").id;e.fetchData(a)})).catch((function(e){console.error(e)}))}}))})),Re(ke(e),"onCancel",(function(){e.setState({uvisable:!e.state.uvisable})})),Re(ke(e),"onTeamChange",(function(t){e.fetchUser(t)})),Re(ke(e),"renderTopic",(function(e){return e?e.name:""})),Re(ke(e),"renderTime",(function(e){return e?w()(e).format("YYYY-MM-DD HH:mm:ss"):"-"})),Re(ke(e),"redrawPageData",(function(t){e.setState({pageData:t})})),e.state={isQueries:!1,queriesRecord:{},isLoading:!1,pageData:[],isMobile:!1,uvisable:!1,dialogObj:{record:{},visible:!1},value:{},teamData:[],ownerData:[],spanCluster:"",filterDataSource:[],dataSource:[]},e}return Se(a,[{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"shouldComponentUpdate",value:function e(t,a){return this.state.clusterData===a.clusterData}},{key:"onSort",value:function e(t,a){var r=Object(D.d)(this.state.dataSource,t,a);this.refreshTableData(r)}},{key:"render",value:function e(){var t=this,a=this.state,r=a.isLoading,o=a.dialogObj,i=a.isQueries,l=a.isMobile,c=null,u=Ee({},Ve.simpleFormDialog),p={children:"OK"},m={children:"Cancel"};return l&&(u.width="300px"),c=i?n.a.createElement("div",null,n.a.createElement("span",null,n.a.createElement("h3",{style:{margin:"0px 0px 0px",fontSize:"20px",fontWeight:"500",color:"rgba(0, 0, 0, 0.85)"}},n.a.createElement(g.a,{onClick:function e(){return t.backward()},style:Ve.backward,size:"large",type:"backward"}),"Kafka Producer")),n.a.createElement(Z,{record:this.state.queriesRecord})):n.a.createElement("div",null,n.a.createElement(me,{dialogObj:o,hideDetailDialog:this.hideDetailDialog}),n.a.createElement(T.a,{dataSource:this.state.dataSource,refreshTableData:this.refreshTableData,refreshDataSource:this.fetchData,selectTitle:"Cluster",selectField:"cluster.name",searchTitle:"Filter",searchField:"topicName",searchPlaceholder:"Input Topic Name",switchField:"topicName",id:"topicTopicList"}),n.a.createElement(d.a,{loading:r,dataSource:this.state.pageData,hasBorder:!1,onSort:function e(a,r){return t.onSort(a,r)}},n.a.createElement(d.a.Column,{title:"Topic Name",dataIndex:"topicName",sortable:!0}),n.a.createElement(d.a.Column,{title:"File Size",dataIndex:"fileSize",cell:this.renderBytes,sortable:!0}),n.a.createElement(d.a.Column,{title:"Cluster",dataIndex:"cluster.name"}),n.a.createElement(d.a.Column,{title:"Create Date",dataIndex:"createTime",cell:this.renderTime}),n.a.createElement(d.a.Column,{title:"Owner",dataIndex:"owner",cell:this.renderTopic}),n.a.createElement(d.a.Column,{title:"Team",dataIndex:"team",cell:this.renderTopic}),n.a.createElement(d.a.Column,{title:"Operation",cell:this.renderOper})),n.a.createElement(C.a,{dataSource:this.state.filterDataSource,redrawPageData:this.redrawPageData}),n.a.createElement(s.a,{visible:this.state.uvisable,className:"simple-form-dialog",onOk:this.onOk,onCancel:this.onCancel,footerAlign:"center",autoFocus:!1,isFullScreen:!0,onClose:this.onCancel,style:u,closeable:"esc,mask,close",title:"Update",okProps:p,cancelProps:m},n.a.createElement(O.FormBinderWrapper,{ref:function e(a){t.refForm=a},value:this.state.value},n.a.createElement("div",null,n.a.createElement(Fe,{style:Ve.formRow},n.a.createElement(Ne,{span:"".concat("6"),style:Ve.label},"Cluster:"),n.a.createElement(Ne,{span:"".concat(l?"18":"16")},n.a.createElement("span",{style:{width:"100%"}},this.state.spanCluster))),n.a.createElement(Fe,{style:Ve.formRow},n.a.createElement(Ne,{span:"".concat("6"),style:Ve.label},"Topic Name:"),n.a.createElement(Ne,{span:"".concat(l?"18":"16")},n.a.createElement("span",{style:{width:"100%"}},this.state.value.topicName))),n.a.createElement(Fe,{style:Ve.formRow},n.a.createElement(Ne,{span:"".concat("6"),style:Ve.label},"Team:"),n.a.createElement(Ne,{span:"".concat(l?"18":"16")},n.a.createElement(O.FormBinder,{name:"teamId",required:!0,message:"Required"},n.a.createElement(f.a,{showSearch:!0,dataSource:this.state.teamData,placeholder:"please select team",style:{width:"100%"},onChange:function e(a,r,n){t.onTeamChange(a,r,n)},disabled:this.state.value.disabled})),n.a.createElement(O.FormError,{name:"teamId"}))),n.a.createElement(Fe,{style:Ve.formRow},n.a.createElement(Ne,{span:"".concat("6"),style:Ve.label},"Owner:"),n.a.createElement(Ne,{span:"".concat(l?"18":"16")},n.a.createElement(O.FormBinder,{name:"ownerId",required:!0,message:"Required"},n.a.createElement(f.a,{showSearch:!0,dataSource:this.state.ownerData,placeholder:"please select team user",style:{width:"100%"},disabled:this.state.value.disabled})),n.a.createElement(O.FormError,{name:"ownerId"})))))))}}]),a}(r.Component))||be,Ve={link:{margin:"0 5px",color:"rgba(49, 128, 253, 0.65)",cursor:"pointer",textDecoration:"none",fontSize:"13px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},separator:{margin:"0 8px",display:"inline-block",height:"12px",width:"1px",verticalAlign:"middle",background:"#e8e8e8"},backward:{display:"inline-block",minWidth:"40px",marginBottom:"15px",cursor:"pointer",color:"#0066FF"},formRow:{marginTop:20},simpleFormDialog:{width:"640px"},test:{fontSize:"13px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}},_e={container:{margin:"20px",padding:"10px 20px 20px",minHeight:"600px"}},Ie,Le=function e(){var t=[{link:"",text:"Topic"},{link:"#/topic/list",text:"Topic List"}];return n.a.createElement("div",null,n.a.createElement(l.a,{items:t,title:"Topic List"}),n.a.createElement(i.a,{style:_e.container},n.a.createElement(Be,null)))},qe=t.default=Le},979:function(e,t,a){"use strict";var r=a(434),n=a(309),o=a(36),i=a(11),l=a(74),c=a(20),s=a(142),u=a(53),f=a(66),p=a(16),d=a(99),m=a(33),h=a(1),y=a.n(h),b=a(21),v=a(108);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,a){return t&&w(e.prototype,t),a&&w(e,a),e}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function D(e){var t=k();return function a(){var r=x(e),n;if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var R=m.a.Row,F=m.a.Col,N=function(e){S(a,e);var t=D(a);function a(e){var r;E(this,a),P(T(r=t.call(this,e)),"componentWillUnmount",(function(){r.mounted=!1})),P(T(r),"arrayIsEqual",(function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var a=0;a<e.length;a+=1){var r=JSON.stringify(e[a]),n=JSON.stringify(t[a]);if(0!==r.localeCompare(n))return!1}return!0})),P(T(r),"refreshTableData",(function(e){r.props.refreshTableData(e)})),P(T(r),"getCluster",(function(){var e=[{value:"-1",label:"ALL"}];b.a.get("/cluster").then((function(t){if(200===t.data.code){var a=t.data.data[0].id,n=t.data.data[0].name,o=r.state.clusterValue;t.data.data.forEach((function(t){t.id<a&&(a=t.id,n=t.name),e.push({value:t.id,label:t.name})}));var i=Object(v.a)(r.props.id).id;if(null!=i?r.props.refreshDataSource(i):r.props.refreshDataSource(a),void 0===o&&"settingUser"!==r.props.id&&"settingTeam"!==r.props.id){var l={id:a,cluster:n,isAll:!1};Object(v.d)(r.props.id,l),o=n}r.setState({clusterSelectData:e,clusterValue:o})}})).catch((function(e){console.error("error",e),void 0!==e.response&&void 0!==e.response.status&&""!==e.response.status&&null!=e.response.status&&null!=e.response.status&&(401===e.response.status?p.a.error({content:"Please login!",closeable:!0}):p.a.error({content:"get cluster faily!",duration:1e4,closeable:!0}))}))})),P(T(r),"handleClusterFilterChange",(function(e,t){r.props.refreshDataSource(t.value);var a=r.state.dataSource;e=t.label.toString();var n={id:t.value,cluster:t.label,isAll:!1};"-1"===t.value&&(n.isAll=!0),Object(v.d)(r.props.id,n);var o=r.filterByPara(a,r.state.clusterField,e,r.state.searchField,r.state.searchValue,r.state.switchField,r.state.switchValue);r.setState({clusterValue:e}),r.refreshTableData(o)})),P(T(r),"handleFilterChange",(function(e){e=e.toString();var t=r.state.dataSource,a=r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,e,r.state.switchField,r.state.switchValue);r.setState({searchValue:e}),r.refreshTableData(a),r.setSesion("".concat(r.props.id,"Search"),e)})),P(T(r),"onSwitchChange",(function(e){var t=r.state.dataSource,a=r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,r.state.searchValue,r.state.switchField,e);r.setState({switchValue:e}),r.refreshTableData(a),r.setSesion("".concat(r.props.id,"Switch"),e)})),P(T(r),"setSesion",(function(e,t){void 0!==e&&sessionStorage.setItem(e,t)})),P(T(r),"initData",(function(e){var t=JSON.parse(JSON.stringify(e)),a=r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,r.state.searchValue,r.state.switchField,r.state.switchValue);r.setState({dataSource:t}),r.refreshTableData(a)})),P(T(r),"filterByPara",(function(e,t,a,n,o,i,l){var c=JSON.parse(JSON.stringify(e));return r.isNullOrEmptyStr(i)||l&&"false"!==l||(c=c.filter((function(e){return!e[i].startsWith("_")}))),r.isNullOrEmptyStr(t)||r.isNullOrEmptyStr(a)||"ALL"===a||(c=r.searchdata(c,t,a)),r.isNullOrEmptyStr(o)||(c=r.searchdata(c,n,o)),c})),P(T(r),"searchdata",(function(e,t,a){var r=t.split(",");return e.filter((function(e){for(var t=!1,n=0,o=r.length;n<o;n+=1){for(var i=r[n].split("."),l=e,c=0,s=i.length;c<s;c+=1)l=l[i[c]];if(-1!==l.toLocaleLowerCase().search(a.toLocaleLowerCase())){t=!0;break}}return t}))})),P(T(r),"isNullOrEmptyStr",(function(e){return null==e||""===e})),P(T(r),"selectView",(function(e){return y.a.createElement(F,{align:"center"},y.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),y.a.createElement(u.a,{showSearch:!0,dataSource:r.state.clusterSelectData,placeholder:"please select cluster",style:{width:"300px"},onChange:function e(t,a,n){r.handleClusterFilterChange(t,n)},value:r.state.clusterValue}))})),P(T(r),"filterView",(function(e,t){return y.a.createElement(F,{align:"center"},y.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),y.a.createElement(c.a,{placeholder:r.isNullOrEmptyStr(t)?"Input filter value":t,hasClear:!0,onChange:r.handleFilterChange,style:{width:"300px"},value:r.state.searchValue}))})),P(T(r),"parseBoolean",(function(e){return"true"===e||"TRUE"===e||"True"===e||"false"!==e&&"FALSE"!==e&&"False"!==e&&void 0})),P(T(r),"getFilterData",(function(e){var t=JSON.parse(JSON.stringify(e)),a;return r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,r.state.searchValue,r.state.switchField,r.state.switchValue)})),P(T(r),"switchView",(function(){var e=r.state.switchValue;return"string"==typeof r.state.switchValue&&(e=r.parseBoolean(r.state.switchValue.trim())),y.a.createElement(F,{align:"center"},y.a.createElement("div",{style:{display:"flex"}},y.a.createElement("span",{style:B.special},"Include special topic:\xa0\xa0"),y.a.createElement(n.a,{onChange:r.onSwitchChange,checked:e,defaultChecked:e,checkedChildren:y.a.createElement(i.a,{type:"select",size:"xs"}),unCheckedChildren:y.a.createElement(i.a,{type:"close",size:"xs"})})))})),void 0!==r.props.onRef&&r.props.onRef(T(r));var o=sessionStorage.getItem("".concat(r.props.id,"Search")),l=sessionStorage.getItem("".concat(r.props.id,"Switch"));return r.state={dataSource:r.props.dataSource,clusterSelectData:[],clusterValue:Object(v.a)(r.props.id).cluster,clusterField:r.props.selectField,searchValue:null===o?"":o,searchField:r.props.searchField,switchField:r.props.switchField,switchValue:null!==l&&""!==l&&l},r}return O(a,[{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentDidMount",value:function e(){this.getCluster()}},{key:"componentWillReceiveProps",value:function e(t){this.validateCondition(this.state.dataSource,t.dataSource)&&(this.setState({dataSource:t.dataSource}),this.initData(t.dataSource))}},{key:"validateCondition",value:function e(t,a){return(null!=t||null!=a)&&((void 0!==t||void 0!==a)&&((0!==t.length||0!==a.length)&&(!this.arrayIsEqual(t,a)&&t!==a)))}},{key:"render",value:function e(){var t=this.props.selectTitle,a=this.props.searchTitle,r=this.props.searchPlaceholder,n=this.isNullOrEmptyStr(t)?"":this.selectView(t),o=this.isNullOrEmptyStr(a)?"":this.filterView(a,r),i=this.isNullOrEmptyStr(this.props.otherComponent)?"":this.props.otherComponent,l=this.isNullOrEmptyStr(this.props.switchField)?"":this.switchView();return y.a.createElement(R,{style:B.row},n,o,i,l)}}]),a}(h.Component),B={row:{margin:"20px 4px 20px"},special:{fontFamily:'Roboto, "Helvetica Neue", Helvetica, Tahoma, Arial, "PingFang SC", "Microsoft YaHei"',fontSize:"12px",lineHeight:"1.28571",color:"#333333",alignSelf:"center",fontWeight:"600"}},V=t.a=N}}]);